<html>
<head>
	<script src='../../src/jquery.min.js'></script>
	<script src='../../src/bMoor.js'></script>
	
	<script>
		bMoor.autoload.setRoot('../../src');
		bMoor.autoload.setLibrary( ['jquery'], '../../src/jquery', {fullName : true} );
	</script>
	
	<script src='../../src/bmoor/model/Map.js'></script>
	<script src='../../src/bmoor/lib/WaitFor.js'></script>
	<script src='../../src/bmoor/lib/Bootstrap.js'></script>
	<script src='../../src/bmoor/lib/MouseTracker.js'></script>
	<script src='../../src/bmoor/snap/Node.js'></script>
	<script src='../../src/bmoor/drawing/Context.js'></script>
	<script src='../../src/bmoor/drawing/Sketch.js'></script>
	<script src='../../src/bmoor/snap/form/Button.js'></script>
</head>
<body>
	<div id='wrapper' snap-node='bmoor.drawing.Sketch' snap-publish='this.sketch' style='width: 500px; height: 500px; border: 1px solid black;'></div>
	<div>
		<button snap-node='bmoor.snap.form.Button' snap-data='this.sketch.data' snap-variable='width' value='1'>1</button>
		<button snap-node='bmoor.snap.form.Button' snap-data='this.sketch.data' snap-variable='width' value='2'>2</button>
		<button snap-node='bmoor.snap.form.Button' snap-data='this.sketch.data' snap-variable='width' value='3'>3</button>
	</div>
	<div>
		<button snap-node='bmoor.snap.form.Button' snap-data='this.sketch.data' snap-variable='color' value='black'>Black</button>
		<button snap-node='bmoor.snap.form.Button' snap-data='this.sketch.data' snap-variable='color' value='red'>Red</button>
		<button snap-node='bmoor.snap.form.Button' snap-data='this.sketch.data' snap-variable='color' value='green'>Green</button>
	</div>
	<script>
	var save;
	
	setTimeout(function(){
		var context = sketch.ctx;
		
		context.beginPath();
		context.moveTo(170, 80);
		context.bezierCurveTo(130, 100, 130, 150, 230, 150);
		context.bezierCurveTo(250, 180, 320, 180, 340, 150);
		context.bezierCurveTo(420, 150, 420, 120, 390, 100);
		context.bezierCurveTo(430, 40, 370, 30, 340, 50);
		context.bezierCurveTo(320, 5, 250, 20, 250, 50);
		context.bezierCurveTo(200, 5, 150, 20, 170, 80);
		context.closePath();
		context.lineWidth( 5 );
		context.fillStyle( '#8ED6FF' );
		context.fill();
		context.strokeStyle( '#0000ff' );
		context.stroke();
		
		save = sketch.save();
	}, 500);
	
	setTimeout(function(){
		context = sketch.ctx.clear();
	}, 1500);
	
	setTimeout(function(){
		context = sketch.load( save );
	}, 4000);
	
	setTimeout(function(){
		$('#wrapper').css({ width : 300, height: 300 });
		sketch.resize();
	}, 6000);
	
	// allow you to draw something... then load
	setTimeout(function(){
		context = sketch.load( save );
	}, 10000);
	</script>
</body>
</html>

